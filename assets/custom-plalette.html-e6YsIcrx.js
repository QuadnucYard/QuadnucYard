import{_ as e}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as p,o,c,b as n,d as s,e as l,f as a}from"./app-uZEI-F7F.js";const i="/img/vue/quasar/custom-palette/palette-10.png",u="/img/vue/quasar/custom-palette/palette-14.png",r="/img/vue/quasar/custom-palette/cube-style.png",k="/img/vue/quasar/custom-palette/palette-14-ok.png",d="/img/vue/quasar/custom-palette/palette-unexpected.png",v="/img/vue/quasar/custom-palette/dom-cubes.png",m="/img/vue/quasar/custom-palette/palette-null-ok.png",b="/img/vue/quasar/custom-palette/field-1.png",g="/img/vue/quasar/custom-palette/field-2.png",q={},h=a(`<h1 id="quasar-自定义一个调色板输入框" tabindex="-1"><a class="header-anchor" href="#quasar-自定义一个调色板输入框" aria-hidden="true">#</a> Quasar 自定义一个调色板输入框</h1><div class="hint-container info"><p class="hint-container-title">需求</p><p>使用 QInput 选择颜色并预览。</p><p>利用 color picker，但只显示调色板，且调色板颜色为 Quasar 的 css variable 支持的所有颜色。</p></div><h2 id="自定义调色板" tabindex="-1"><a class="header-anchor" href="#自定义调色板" aria-hidden="true">#</a> 自定义调色板</h2><h3 id="颜色列表" tabindex="-1"><a class="header-anchor" href="#颜色列表" aria-hidden="true">#</a> 颜色列表</h3><p>首先，我们需要获取 Quasar 支持的颜色变量列表。这个在 <code>quasar/dist/types/api/color.d.ts</code> 中有定义：</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token comment">// color.d.ts</span>
<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">BrandColor</span> <span class="token operator">=</span>
  <span class="token operator">|</span> <span class="token string">&quot;primary&quot;</span>
  <span class="token operator">|</span> <span class="token string">&quot;secondary&quot;</span>
  <span class="token operator">|</span> <span class="token string">&quot;accent&quot;</span>
  <span class="token operator">|</span> <span class="token string">&quot;dark&quot;</span>
  <span class="token operator">|</span> <span class="token string">&quot;positive&quot;</span>
  <span class="token operator">|</span> <span class="token string">&quot;negative&quot;</span>
  <span class="token operator">|</span> <span class="token string">&quot;info&quot;</span>
  <span class="token operator">|</span> <span class="token string">&quot;warning&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">Color</span> <span class="token operator">=</span>
  <span class="token operator">|</span> <span class="token string">&quot;red&quot;</span>
  <span class="token operator">|</span> <span class="token string">&quot;pink&quot;</span>
  <span class="token operator">|</span> <span class="token string">&quot;purple&quot;</span>
  <span class="token operator">|</span> <span class="token string">&quot;deep-purple&quot;</span>
  <span class="token operator">|</span> <span class="token string">&quot;indigo&quot;</span>
  <span class="token operator">|</span> <span class="token string">&quot;blue&quot;</span>
  <span class="token operator">|</span> <span class="token string">&quot;light-blue&quot;</span>
  <span class="token operator">|</span> <span class="token string">&quot;cyan&quot;</span>
  <span class="token operator">|</span> <span class="token string">&quot;teal&quot;</span>
  <span class="token operator">|</span> <span class="token string">&quot;green&quot;</span>
  <span class="token operator">|</span> <span class="token string">&quot;light-green&quot;</span>
  <span class="token operator">|</span> <span class="token string">&quot;lime&quot;</span>
  <span class="token operator">|</span> <span class="token string">&quot;yellow&quot;</span>
  <span class="token operator">|</span> <span class="token string">&quot;amber&quot;</span>
  <span class="token operator">|</span> <span class="token string">&quot;orange&quot;</span>
  <span class="token operator">|</span> <span class="token string">&quot;deep-orange&quot;</span>
  <span class="token operator">|</span> <span class="token string">&quot;brown&quot;</span>
  <span class="token operator">|</span> <span class="token string">&quot;grey&quot;</span>
  <span class="token operator">|</span> <span class="token string">&quot;blue-grey&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">ColorShade</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">2</span> <span class="token operator">|</span> <span class="token number">3</span> <span class="token operator">|</span> <span class="token number">4</span> <span class="token operator">|</span> <span class="token number">5</span> <span class="token operator">|</span> <span class="token number">6</span> <span class="token operator">|</span> <span class="token number">7</span> <span class="token operator">|</span> <span class="token number">8</span> <span class="token operator">|</span> <span class="token number">9</span> <span class="token operator">|</span> <span class="token number">10</span> <span class="token operator">|</span> <span class="token number">11</span> <span class="token operator">|</span> <span class="token number">12</span> <span class="token operator">|</span> <span class="token number">13</span> <span class="token operator">|</span> <span class="token number">14</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">DetailedColor</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>Color<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>ColorShade<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">NamedColor</span> <span class="token operator">=</span> LiteralUnion<span class="token operator">&lt;</span>
  BrandColor <span class="token operator">|</span> Color <span class="token operator">|</span> DetailedColor <span class="token operator">|</span> <span class="token keyword">keyof</span> CustomColors
<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其中 <code>BrandColor</code> 没有变体，<code>Color</code> 根据 <code>ColorShade</code> 有 14 种变体组合成 <code>DetailedColor</code>。（写完时才发现其实包括颜色原型应该是 15 个变体，所以展示的图片只有 14 列）</p><p>然后可以仿照着写一下所有颜色组合得到的颜色列表。因为是全局变量，我就直接放在 store 里了。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> colors <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;quasar&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useColorStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&quot;color&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> brandColors <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;primary&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;secondary&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;accent&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;dark&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;positive&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;negative&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;info&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;warning&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> colorList <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;pink&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;purple&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;deep-purple&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;indigo&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;blue&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;light-blue&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;cyan&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;teal&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;green&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;light-green&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;lime&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;yellow&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;amber&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;orange&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;deep-orange&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;brown&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;grey&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;blue-grey&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> colorShades <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> allColors <span class="token operator">=</span> brandColors<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>
    colorList<span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>colorShades<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>c<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>t<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> palette<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> allColors<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>colors<span class="token punctuation">.</span>getPaletteColor<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span> palette <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以 <code>console.log</code> 输出一下。</p><div class="language-txt line-numbers-mode" data-ext="txt"><pre class="language-txt"><code>Proxy(Array) {0: &#39;#1976d2&#39;, 1: &#39;#26a69a&#39;, 2: &#39;#9c27b0&#39;, 3: &#39;#1d1d1d&#39;, 4: &#39;#21ba45&#39;, 5: &#39;#c10015&#39;, 6: &#39;#31ccec&#39;, 7: &#39;#f2c037&#39;, 8: &#39;#ffebee&#39;, 9: &#39;#ffcdd2&#39;, 10: &#39;#ef9a9a&#39;, 11: &#39;#e57373&#39;, 12: &#39;#ef5350&#39;, 13: &#39;#f44336&#39;, 14: &#39;#e53935&#39;, 15: &#39;#d32f2f&#39;, 16: &#39;#c62828&#39;, 17: &#39;#b71c1c&#39;, 18: &#39;#fce4ec&#39;, 19: &#39;#f8bbd0&#39;, 20: &#39;#f48fb1&#39;, 21: &#39;#f06292&#39;, 22: &#39;#ec407a&#39;, 23: &#39;#e91e63&#39;, 24: &#39;#d81b60&#39;, 25: &#39;#c2185b&#39;, 26: &#39;#ad1457&#39;, 27: &#39;#880e4f&#39;, 28: &#39;#f3e5f5&#39;, 29: &#39;#e1bee7&#39;, 30: &#39;#ce93d8&#39;, 31: &#39;#ba68c8&#39;, 32: &#39;#ab47bc&#39;, 33: &#39;#9c27b0&#39;, 34: &#39;#8e24aa&#39;, 35: &#39;#7b1fa2&#39;, 36: &#39;#6a1b9a&#39;, 37: &#39;#4a148c&#39;, 38: &#39;#ede7f6&#39;, 39: &#39;#d1c4e9&#39;, 40: &#39;#b39ddb&#39;, 41: &#39;#9575cd&#39;, 42: &#39;#7e57c2&#39;, 43: &#39;#673ab7&#39;, 44: &#39;#5e35b1&#39;, 45: &#39;#512da8&#39;, 46: &#39;#4527a0&#39;, 47: &#39;#311b92&#39;, 48: &#39;#e8eaf6&#39;, 49: &#39;#c5cae9&#39;, 50: &#39;#9fa8da&#39;, 51: &#39;#7986cb&#39;, 52: &#39;#5c6bc0&#39;, 53: &#39;#3f51b5&#39;, 54: &#39;#3949ab&#39;, 55: &#39;#303f9f&#39;, 56: &#39;#283593&#39;, 57: &#39;#1a237e&#39;, 58: &#39;#e3f2fd&#39;, 59: &#39;#bbdefb&#39;, 60: &#39;#90caf9&#39;, 61: &#39;#64b5f6&#39;, 62: &#39;#42a5f5&#39;, 63: &#39;#2196f3&#39;, 64: &#39;#1e88e5&#39;, 65: &#39;#1976d2&#39;, 66: &#39;#1565c0&#39;, 67: &#39;#0d47a1&#39;, 68: &#39;#e1f5fe&#39;, 69: &#39;#b3e5fc&#39;, 70: &#39;#81d4fa&#39;, 71: &#39;#4fc3f7&#39;, 72: &#39;#29b6f6&#39;, 73: &#39;#03a9f4&#39;, 74: &#39;#039be5&#39;, 75: &#39;#0288d1&#39;, 76: &#39;#0277bd&#39;, 77: &#39;#01579b&#39;, 78: &#39;#e0f7fa&#39;, 79: &#39;#b2ebf2&#39;, 80: &#39;#80deea&#39;, 81: &#39;#4dd0e1&#39;, 82: &#39;#26c6da&#39;, 83: &#39;#00bcd4&#39;, 84: &#39;#00acc1&#39;, 85: &#39;#0097a7&#39;, 86: &#39;#00838f&#39;, 87: &#39;#006064&#39;, 88: &#39;#e0f2f1&#39;, 89: &#39;#b2dfdb&#39;, 90: &#39;#80cbc4&#39;, 91: &#39;#4db6ac&#39;, 92: &#39;#26a69a&#39;, 93: &#39;#009688&#39;, 94: &#39;#00897b&#39;, 95: &#39;#00796b&#39;, 96: &#39;#00695c&#39;, 97: &#39;#004d40&#39;, 98: &#39;#e8f5e9&#39;, 99: &#39;#c8e6c9&#39;, …}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>根据上述自定义的调色板，写一个包装过的 QColor 组件：</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>q-color</span>
    <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hex<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">no-footer</span>
    <span class="token attr-name">default-view</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>palette<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">:palette</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>paddedPalette<span class="token punctuation">&quot;</span></span>
    <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 200px</span><span class="token punctuation">&quot;</span></span></span>
  <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useColorStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/stores/color&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> palette <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useColorStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> paddedPalette <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>palette<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token operator">...</span>palette<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> hex <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span>palette<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其中 <code>paddedPalette</code> 是希望 brand color 在单独一行显示。当颜色为 <code>null</code> 时，就不会在调色板上显示。</p><p>效果如下。</p><figure><img src="`+i+'" alt="" width="20%" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="展示更多颜色" tabindex="-1"><a class="header-anchor" href="#展示更多颜色" aria-hidden="true">#</a> 展示更多颜色</h3><p>但是 10 种颜色是不够的，我们希望增加到 15 种。直接更改上述代码中的 <code>colorShades</code> 会得到这样的画面：</p><figure><img src="'+u+'" alt="凌乱的颜色" width="20%" tabindex="0" loading="lazy"><figcaption>凌乱的颜色</figcaption></figure><p>但不幸的是，Quasar 并没有提供设置调色板每行数量的 API。那么每行色块数量是由什么控制的呢？注意到：</p><figure><img src="'+r+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>原来是 CSS 决定的！<code>10%</code> 就表明每个占一行的 10%，也就是 1 行能放 10 个。</p><p>而这是在哪定义的呢？我们来看一下 <code>quasar/src/components/color/QColor.sass</code>：</p><div class="language-sass line-numbers-mode" data-ext="sass"><pre class="language-sass"><code><span class="token comment">// QColor.sass</span>
<span class="token selector">.q-color-picker</span>
  <span class="token selector">&amp;__cube</span>
<span class="token property-line">    <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 10<span class="token operator">%</span></span>
<span class="token property-line">    <span class="token property">width</span><span class="token punctuation">:</span> 10<span class="token operator">%</span> <span class="token important">!important</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这里写死了每个小方块的宽度和高度，都是 <code>10%</code>。</p><p>但这并不妨碍我们覆盖这个样式。</p>`,26),f=n("div",{class:"language-vue line-numbers-mode","data-ext":"vue"},[n("pre",{vue:"",class:"language-vue"},[n("code",null,[n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("template")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("q-color")]),s(`
    `),n("span",{class:"token attr-name"},"v-model"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("hex"),n("span",{class:"token punctuation"},'"')]),s(`
    `),n("span",{class:"token attr-name"},"no-footer"),s(`
    `),n("span",{class:"token attr-name"},"default-view"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("palette"),n("span",{class:"token punctuation"},'"')]),s(`
    `),n("span",{class:"token attr-name"},"class"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("my-color-picker"),n("span",{class:"token punctuation"},'"')]),s(`
    `),n("span",{class:"token attr-name"},":palette"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("paddedPalette"),n("span",{class:"token punctuation"},'"')]),s(`
    `),n("span",{class:"token special-attr"},[n("span",{class:"token attr-name"},"style"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),n("span",{class:"token value css language-css"},[n("span",{class:"token property"},"width"),n("span",{class:"token punctuation"},":"),s(" 200px")]),n("span",{class:"token punctuation"},'"')])]),s(`
  `),n("span",{class:"token punctuation"},"/>")]),s(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("template")]),n("span",{class:"token punctuation"},">")]),s(`

`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("script")]),s(),n("span",{class:"token attr-name"},"setup"),s(),n("span",{class:"token attr-name"},"lang"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("ts"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),n("span",{class:"token script"},[n("span",{class:"token language-javascript"},[s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" useColorStore "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"@/stores/color"'),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"{"),s(" palette "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"useColorStore"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"const"),s(" paddedPalette "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),s(`
  `),n("span",{class:"token operator"},"..."),s("palette"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"slice"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"8"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token operator"},"..."),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Array"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"7"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token operator"},"..."),s("palette"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"slice"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"8"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"const"),s(" hex "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"ref"),n("span",{class:"token punctuation"},"("),s("palette"),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("script")]),n("span",{class:"token punctuation"},">")]),s(`

`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("style")]),s(),n("span",{class:"token attr-name"},"lang"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("scss"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),n("span",{class:"token style"},[n("span",{class:"token language-css"},[s(`
`),n("span",{class:"token selector"},".my-color-picker"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token selector"},".q-color-picker__cube"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token property"},"padding-bottom"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token function"},"calc"),n("span",{class:"token punctuation"},"("),s("100% / 14"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token property"},"width"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token function"},"calc"),n("span",{class:"token punctuation"},"("),s("100% / 14"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token important"},"!important"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("style")]),n("span",{class:"token punctuation"},">")]),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"}," "),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"}," "),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),y=a('<p>上面定义了一个 <code>my-color-picker</code> class，对其中的 <code>.q-color-picker__cube</code>，覆盖 <code>padding-bottom</code> 和 <code>width</code>，使用 <code>calc()</code> 完成计算。</p><p>注意不能用 <code>scoped</code>，因为不会给自动生成的元素注入 <code>data-v-</code> 属性，会导致样式应用无效。</p><figure><img src="'+k+'" alt="" width="25%" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="禁用鼠标事件" tabindex="-1"><a class="header-anchor" href="#禁用鼠标事件" aria-hidden="true">#</a> 禁用鼠标事件</h3><p>但是会发现一个问题：无效的方块照样能够点击，并且会导致颜色设为 <code>#000000</code>，而这不是我们希望的。</p><figure><img src="'+d+'" alt="意外的可点击方块" width="25%" tabindex="0" loading="lazy"><figcaption>意外的可点击方块</figcaption></figure><p>观察 DOM，发现颜色值为 <code>null</code> 的元素没有设置 <code>style</code> 属性。</p><figure><img src="'+v+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>那么解决方法就很明显了，禁掉这些没有设置 <code>style</code> 的元素的鼠标事件。使用 <code>:not(style)</code> 来选择不具有 attribute 名为 <code>style</code> 的元素，加上 <code>pointer-events: none</code>。</p><p>此外，为了防止用户修改输入框（因为可选的颜色的固定的，不能扩展），对 <code>input</code> 元素也要加上这个样式。</p>',10),_=n("div",{class:"language-scss line-numbers-mode","data-ext":"scss"},[n("pre",{scss:"",class:"language-scss"},[n("code",null,[n("span",{class:"token selector"},".my-color-picker "),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token selector"},".q-color-picker__cube "),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token property"},"padding-bottom"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token function"},"calc"),n("span",{class:"token punctuation"},"("),s("100% "),n("span",{class:"token operator"},"/"),s(" 14"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token property"},"width"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token function"},"calc"),n("span",{class:"token punctuation"},"("),s("100% "),n("span",{class:"token operator"},"/"),s(" 14"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token important"},"!important"),n("span",{class:"token punctuation"},";"),s(`
    &`),n("span",{class:"token punctuation"},":"),n("span",{class:"token function"},"not"),n("span",{class:"token punctuation"},"("),s("[style]"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token property"},"pointer-events"),n("span",{class:"token punctuation"},":"),s(" none"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token selector"},"input "),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token property"},"pointer-events"),n("span",{class:"token punctuation"},":"),s(" none"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("br"),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),w=n("p",null,"效果如下，可以解决问题。",-1),x=n("figure",null,[n("img",{src:m,alt:"",width:"20%",tabindex:"0",loading:"lazy"}),n("figcaption")],-1),C=n("h2",{id:"包装输入框",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#包装输入框","aria-hidden":"true"},"#"),s(" 包装输入框")],-1),S={href:"https://quasar.dev/vue-components/color-picker#with-qinput",target:"_blank",rel:"noopener noreferrer"},P=a(`<p>因为不需要用户输入，使用了 QField 代替 QInput。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>q-field</span> <span class="token attr-name">dense</span> <span class="token attr-name">:standout</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\`bg-\${hexToPalette[hex]} text-\${contrastBW(hex)}\`<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#control</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>q-badge</span> <span class="token attr-name">:color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hexToPalette[hex]<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:text-color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>contrastBW(hex)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        {{ hex }}
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>q-badge</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#append</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>q-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>colorize<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cursor-pointer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>q-popup-proxy</span> <span class="token attr-name">cover</span> <span class="token attr-name">transition-show</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scale<span class="token punctuation">&quot;</span></span> <span class="token attr-name">transition-hide</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scale<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>q-color</span>
            <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hex<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">no-footer</span>
            <span class="token attr-name">default-view</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>palette<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-color-picker<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:palette</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>paddedPalette<span class="token punctuation">&quot;</span></span>
            <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 200px</span><span class="token punctuation">&quot;</span></span></span>
          <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>q-popup-proxy</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>q-icon</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>q-field</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这里用了 <code>standout</code> 风格，感觉更加贴合，而且点击可以在整个框的范围内显示颜色（如右图）。这个 QBadge 需要放在 <code>control</code> 区，不然会被上下拉长。</p><p>展示效果如下：</p><p><img src="`+b+'" alt="" loading="lazy"><br><img src="'+g+'" alt="" loading="lazy"></p><p>完工！</p>',6);function Q(z,B){const t=p("ExternalLinkIcon");return o(),c("div",null,[h,f,y,_,w,x,C,n("p",null,[s("根据"),n("a",S,[s("组件教程"),l(t)]),s("，可以很容易地包装一下上面的颜色选择器。")]),P])}const L=e(q,[["render",Q],["__file","custom-plalette.html.vue"]]);export{L as default};
